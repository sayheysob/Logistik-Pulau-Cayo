<script src="anggota.js"></script>
<script>
  const dropdown = document.getElementById("search");
  const namaEl = document.querySelector(".text-lg.font-semibold");
  const statusEl = document.querySelector(".text-sm.text-yellow-200");
  const totalJamEl = document.querySelectorAll(".text-lg.font-bold")[0];
  const rataRataEl = document.querySelectorAll(".text-lg.font-bold")[1];
  const aktivitasContainer = document.querySelector("section:last-of-type");

  // Ubah input jadi dropdown
  dropdown.replaceWith(() => {
    const select = document.createElement("select");
    select.id = "search";
    select.className = "w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-green-400";
    
    const defaultOpt = document.createElement("option");
    defaultOpt.text = "Pilih nama anggota...";
    defaultOpt.disabled = true;
    defaultOpt.selected = true;
    select.appendChild(defaultOpt);

    dataAnggota.forEach(a => {
      const opt = document.createElement("option");
      opt.value = a.nama;
      opt.textContent = a.nama;
      select.appendChild(opt);
    });

    return select;
  }());

  // Hapus tombol "Cari"
  document.querySelector("button").remove();

  // Event listener: Saat dipilih
  document.getElementById("search").addEventListener("change", (e) => {
    const anggota = dataAnggota.find(a => a.nama === e.target.value);
    if (!anggota) return;

    namaEl.textContent = anggota.nama;
    statusEl.innerHTML = `${anggota.status} â€¢ <span class="text-yellow-400 font-medium">${anggota.duty}</span>`;
    totalJamEl.textContent = anggota.totalJam;
    rataRataEl.textContent = anggota.rataRataJam;

    // Render aktivitas
    const section = aktivitasContainer;
    section.innerHTML = `<h3 class="text-lg font-semibold mb-3">Aktivitas Terakhir</h3>`;
    if (anggota.aktivitas.length === 0) {
      section.innerHTML += `<p class="text-gray-500 text-sm">Tidak ada aktivitas tercatat.</p>`;
    } else {
      anggota.aktivitas.forEach(log => {
        section.innerHTML += `
          <div class="bg-white p-4 rounded-xl shadow mb-3">
            <p class="font-medium text-gray-800">${log.tanggal}</p>
            <p class="text-sm">Total Jam: <strong>${log.total}</strong></p>
            <p class="text-xs text-gray-500">${log.waktu}</p>
          </div>
        `;
      });
    }
  });
</script>
